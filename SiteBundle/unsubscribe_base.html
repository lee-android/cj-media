<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
<title>Infamous Deal: Unsubscribe</title>
<style>

</style>
</head>

<body>
  <div id="container" style="width:100%;">

    <table align="center" border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <td align="center" valign="top">

                <table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color:#1e293d;max-width:1000px;">
                  <tr>
                  <td align="center" valign="top">
                    <table width="100%" align="center"  border="0" cellpadding="0" cellspacing="0" style="max-width:1000px;">
                      <tr>
                        <td>
                          <img src="images/banner-rs.jpg" style="max-width:100%;display:block;" alt="">
                          </td>
                        </tr>
                      </table>
                <div style="border:0px;margin:0px;padding:0px;">
                  <input type="hidden" name="ipaddress" value="">
	                  <input class="siteId-input" type="hidden" id="siteId" name="siteId" value="6">
                    <table width="100%" align="center"  border="0" cellpadding="0" cellspacing="0" style="max-width:500px;">
                      <tr>
                        <td style="padding:20px 10px 0px 10px;">
                          <font face="'Lato', sans-serif;" style="font-size: 14pt" color="#ffffff">We're sorry to see you go! Enter your email address to unsubscribe from Infamous Deal.
                          </font>
                          <div class="vertical-spacer" width="100%" style="font-size: 11px;"><br><br></div>
                          <input class="siteId-input" type="hidden" id="siteId" name="siteId" value="infamousdeal.com">
                          <b>
                          <input type="TEXT" class="input-field-unsub" name="email" value="" placeholder="Email" style="font: 14px 'Lato', serif;height: 25px;width:225px;color:#ffffff;border:1px solid#ffffff; background-color:#1e293d">
                            <font face="'Lato', sans-serif;" style="font-size: 14pt" color="#73AA00">
                            </font>
                          </b>
                      </td>
                    </tr>
                  </table>
                  <table width="100%" align="center" border="0" cellpadding="0" cellspacing="0" style="max-width:500px;">
                    <tr>
                      <td align="left" style="padding:20px 10px 40px 10px;">
                        <button class="unsubscribe-button" style="max-width:230px;width:100%;background-color:#dae1e7;margin: 10px 0px 10px 0px;padding: 14px 0px 14px 0px;border: 0px solid #000000;box-shadow: 2px 2px 8px #686868b8;text-align: center; font-size:18px;font-weight:400;color: #000000;line-height: 1;font-family: 'Lato', serif;" >Unsubscribe
                        </button>
                      </td>
                    </tr>
                  </table>
                </div>


                  <table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" style="max-width:1000px;">
                      <tr>
                          <td align="center" valign="top" style="padding: 20px 0px 20px 0px">
                          </td>
                      </tr>
                  </table>



              </td>
            </tr>
          </table>

        </td>
      </tr>
    </table>
  </div>

  <script src="alertify/alertify.min.js"></script>
  <link rel="stylesheet" href="alertify/css/alertify.min.css" />
  <link rel="stylesheet" href="alertify/css/themes/default.min.css" />

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <script>
      $('.unsubscribe-button').click(function(){
          var emailInput = $('.input-field-unsub').val();
          if(emailInput == '' || emailInput == null){
              alertify.error('Error!!! Please enter email address to unsubscribe');
          }else{

              var uri = "https://api.infamousdeal.com/api/unsubscribe?";

              // console.log('button-clicked!!!');
              var emailInput = $('.input-field-unsub').val();
              var emailInputStr = "email=" + emailInput;
              var siteIdInput = $('.siteId-input').val();
              var siteIdInputStr = "&siteId=" + siteIdInput;
              // console.log('emailInput: ' + emailInput);
              var apiEndpoint = uri + emailInputStr + siteIdInputStr;
              // console.log('apiEndpoint: ' + apiEndpoint);

              $.ajax({
              type: "GET",
              url: apiEndpoint
              }).done(function (data, ) {
                  alertify.success('Success!!! ' + emailInput + ' has been unsubscribed.');
                  // console.log(data);
              }).fail(function (jqXHR, textStatus, errorThrown) {
                  alertify.error('response-text: ' + jqXHR.responseText + ' | status: ' + textStatus);
                  // console.log(jqXHR.responseText);
                  // console.log(textStatus);
              });

          }
      });
  </script>

</body>
</html>
