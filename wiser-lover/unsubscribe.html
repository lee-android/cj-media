<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Wiser Lover: Unsubscribe</title>
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="css/main.css" rel="stylesheet" media="all">
</head>

<body>
    <div class="page-wrapper bg-red p-t-180 p-b-100 font-robo">
        <div class="wrapper wrapper--w960">
          	<a href="/"><img src="img/logo.png" style="max-width:400px;width:80%;display:block;padding-bottom:30px;margin-left:auto;margin-right:auto;"></a>
            <div class="card card-2">
                <div class="card-heading-2"></div>
                <div class="card-body">
                  <input type="hidden" name="ipaddress" value="">
                    <input class="siteId-input" type="hidden" id="siteId" name="siteId" value="6">
                    <h3 class="title">Please enter your email below to unsubscribe</h3>
                        <div class="row row-space">
                            <div class="col-1">

                                <div class="input-group">
                                  <input class="input--style-2 input-field-unsub" type="text" placeholder="Email" name="email">
                                  <font face=" 'Manrope', sans-serif;" style="font-size: 14pt" color="#73AA00">
                                  </font>
                                </div>
                              </div>

                        </div>


                        <div class="p-t-30">
                            <button class="unsubscribe-button" type="submit">Unsubscribe</button>
                        </div>
                        </div>

                </div>
            </div>
        </div>
    </div>
    <script src="alertifyjs/alertify.min.js"></script>
    <link rel="stylesheet" href="alertifyjs/css/alertify.min.css" />
    <link rel="stylesheet" href="alertifyjs/css/themes/default.min.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>
        $('.unsubscribe-button').click(function(){
            var emailInput = $('.input-field-unsub').val();
            if(emailInput == '' || emailInput == null){
                alertify.error('Error!!! Please enter email address to unsubscribe');
            }else{

                var uri = "https://api.wiserlover.com/api/unsubscribe?";

                // console.log('button-clicked!!!');
                var emailInput = $('.input-field-unsub').val();
                var emailInputStr = "email=" + emailInput;
                var siteIdInput = $('.siteId-input').val();
                var siteIdInputStr = "&siteId=" + siteIdInput;
                // console.log('emailInput: ' + emailInput);
                var apiEndpoint = uri + emailInputStr + siteIdInputStr;
                // console.log('apiEndpoint: ' + apiEndpoint);

                $.ajax({
                type: "GET",
                url: apiEndpoint
                }).done(function (data, ) {
                    alertify.success('Success!!! ' + emailInput + ' has been unsubscribed.');
                    // console.log(data);
                }).fail(function (jqXHR, textStatus, errorThrown) {
                    alertify.error('response-text: ' + jqXHR.responseText + ' | status: ' + textStatus);
                    // console.log(jqXHR.responseText);
                    // console.log(textStatus);
                });

            }
        });
    </script>





</body>



</html>
